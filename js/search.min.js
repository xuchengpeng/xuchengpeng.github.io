var fuse,searchInput=document.getElementById("search-input"),searchResults=document.getElementById("search-results"),first=searchResults.firstChild,last=searchResults.lastChild,hasResults=!1;window.addEventListener("load",e=>{let t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState===4)if(t.status===200){{let e=JSON.parse(t.responseText);if(e){let t={shouldSort:!0,location:0,threshold:.6,distance:100,ignoreLocation:!1,keys:["title","summary","tags","categories"]};fuse=new Fuse(e,t)}}}else console.log(t.responseText)},t.open("GET","../index.json"),t.send()}),searchInput.onkeyup=function(){if(fuse){let e=fuse.search(this.value);if(e.length!==0){let t="";for(let n in e)t+=`<li><a href="${e[n].item.permalink}" aria-label="${e[n].item.title}">
          <h1>${e[n].item.title}</h1><p>${e[n].item.summary}</p></a></li>`;searchResults.innerHTML=t,hasResults=!0,first=searchResults.firstChild.firstElementChild,last=searchResults.lastChild.firstElementChild}else searchResults.innerHTML="",hasResults=!1}};function clearSearch(){hasResults=!1,searchResults.innerHTML="",searchInput.value="",searchInput.focus()}searchInput.addEventListener("search",e=>{this.value||clearSearch()}),document.addEventListener("keydown",function(e){e.key=="Escape"?clearSearch():e.key=="ArrowDown"?hasResults&&(e.preventDefault(),document.activeElement==searchInput?first.focus():document.activeElement==last?last.focus():document.activeElement.parentElement.nextSibling.firstElementChild.focus()):e.key=="ArrowUp"?hasResults&&(e.preventDefault(),document.activeElement==searchInput?searchInput.focus():document.activeElement==first?searchInput.focus():document.activeElement.parentElement.previousSibling.firstElementChild.focus()):e.key=="Enter"&&hasResults&&(e.preventDefault(),document.activeElement==searchInput?first.focus():document.activeElement.click())})