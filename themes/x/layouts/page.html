{{ define "main" }}
<article class="article">
  <div class="article-header">
    {{ if .Params.showBreadcrumbs | default (.Site.Params.article.showBreadcrumbs | default false) }}
      {{- partial "breadcrumbs.html" . -}}
    {{ end }}
    <h1 class="article-title">{{ .Title | emojify }}</h1>
    {{ if .Params.showMeta | default (.Site.Params.article.showMeta | default false) }}
      {{- partial "article_meta.html" . -}}
    {{ end }}
    {{ if .Params.showTags | default (.Site.Params.article.showTags | default false) }}
      {{- partial "article_tags.html" . -}}
    {{ end }}
  </div>
  <div class="article-content">
    {{ if and (.Params.showToc | default (.Site.Params.article.showToc | default false)) (in .TableOfContents `<ul>`) }}
      <div class="table-of-contents">
        {{- partial "toc.html" . -}}
      </div>
    {{ end }}
    <div class="content">
      {{ with .Content }}
        <section>{{ . }}</section>
      {{ end }}
      {{ if .Params.showRelatedContent | default (.Site.Params.article.showRelatedContent | default false) }}
        {{ $related := .Site.RegularPages.Related . | first .Site.Params.article.relatedContentLimit }}
        {{ with $related }}
          <section>
            <h2>Related</h2>
            <div class="article-entries">
              {{- range . -}}
                {{- partial "article_entry.html" . -}}
              {{- end -}}
            </div>
          </section>
        {{ end }}
      {{ end }}
    </div>
  </div>
  <div class="article-footer">
    {{- partial "article_pagination.html" . -}}
  </div>
</article>
{{ end }}
